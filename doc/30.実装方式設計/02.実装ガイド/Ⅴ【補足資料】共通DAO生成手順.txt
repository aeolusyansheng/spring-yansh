【前提】

・Eclipse に J-Generator をインストール済みであること。※以下【備考】を参照
・Eclipse 上で、pjnavi-fw の内容が http://pjnavi-dev.pjnavi.local/svn/pjnavi/branches/development の最新と一致していること。
・生成時に使用するDBのスキーマの内容が、最新のテーブル定義書の内容と一致していること。（注1）

【生成手順】

1. 前回生成以降に生成対象のテーブルが増減した場合は、
   pjnavi-fw/generator-template にある下記の設定ファイル内に
   該当のテーブル名を追記もしくは削除する。
　　　バッチ用： pjnavi_crud_batch_config.xml
　　　オンライン用： pjnavi_crud_online_config.xml
2. Eclipse 上で pjnavi-fw を右クリックして [新規]-[その他] を選ぶ。
3. [J-Framework]-[新規CRUD処理（一括生成）] を選ぶ。
4. [次へ] を押す。
5. 下記の内容を入力する。（PJ_TEST00 スキーマを使用する場合）
　　　JDBCドライバ： oracle.jdbc.OracleDriver
　　　JDBC URL： jdbc:oracle:thin:@10.250.24.20:1552/tpjdb
　　　ユーザ名： PJ_TEST00
　　　パスワード： （PJ_TEST00 のパスワード）
6. [接続確認] を押し、確認できたら [OK] を押す。
7. [次へ] を押す。
8. [設定ファイル] 欄に「C:\pjnavi\pleiades-e3.7-java_20120225_for_pjnavi\workspace\pjnavi-fw\generator-template\pjnavi_crud_online_config.xml」と入力する。
9. [終了] を押す。生成が始まるので、それが終わるまで待つ。
10. 生成手順の 2.〜7. を再度行う。
11. [設定ファイル] 欄に「C:\pjnavi\pleiades-e3.7-java_20120225_for_pjnavi\workspace\pjnavi-fw\generator-template\pjnavi_crud_batch_config.xml」と入力する。
12. [終了] を押す。生成が始まるので、それが終わるまで待つ。
13. 前回生成以降に生成不要になったテーブルがある場合は、Eclipse 上で下記のファイルを削除する。
　　　pjnavi-fw/gen-src/jp/co/ctc_g/pjnavi/cm/business/dao/<テーブル名>JobDao.java
　　　pjnavi-fw/gen-src/jp/co/ctc_g/pjnavi/cm/business/dao/<テーブル名>OnlineDao.java
　　　pjnavi-fw/gen-src/jp/co/ctc_g/pjnavi/cm/business/domain/<テーブル名>Entity.java
　　　pjnavi-fw/gen-src/jp/co/ctc_g/pjnavi/cm/integration/mybatis/<テーブル名>JobDaoImpl.java
　　　pjnavi-fw/gen-src/jp/co/ctc_g/pjnavi/cm/integration/mybatis/<テーブル名>OnlineDaoImpl.java
　　　pjnavi-fw/gen-resource/jp/co/ctc_g/pjnavi/cm/integration/mybatis/<テーブル名>JobDaoImpl.xml
　　　pjnavi-fw/gen-resource/jp/co/ctc_g/pjnavi/cm/integration/mybatis/<テーブル名>OnlineDaoImpl.xml
14. pjnavi-fw プロジェクトを右クリックして [チーム]-[リポジトリと同期化] を選ぶ。
15. Eclipse の [チーム同期化] パースペクティブ上で、下記の配下にある各ファイルの内容が適切かどうか確認する。（注2）
　　　pjnavi-fw/gen-src
　　　pjnavi-fw/gen-resource
16. 上記で確認したディレクトリと pjnavi-fw/generator-template（手順1.で変更を加えた場合のみ）をリポジトリにコミットする。

【備考】

・J-Generator のマニュアルは下記の場所にある。

      \\10.214.46.87\pjnavi\各チーム\【移行先】アーキテクト.DBA\01.公開用資料\01.framework\01.document\03.ガイドライン\J-Generatorインストール 
      ※J-Generatorのバージョンは2.2.1.201302011314を使用する事。
　　　　\\10.214.46.87\pjnavi\各チーム\【移行先】アーキテクト.DBA\01.公開用資料\01.framework\01.document\03.ガイドライン\J-Generatorインストール\ID1555708_jgenerator.zip
        を解凍して使用。


・テーブルの定義変更が下記の内容だけの場合は、共通DAOの生成結果に影響がないため再生成が不要。
　　　CHAR／VARCHAR2型のカラムの桁数変更（注3）
　　　NUMBER型でかつ精度が0以外（整数でない）のカラムの、桁数や精度の変更（注4）
　　　PK以外のインデックス（UKを含む）の追加・変更・削除
　　　カラムの初期値の変更

【注意点】

注1：
テーブルやカラムに付与されたコメント（論理名やテーブル定義のバージョン番号）も、
テーブル定義書上の記述と一致していなければならない。
（生成されるソース内にコメントとして書き出されるため）
作業者のPC上のDBを使うとミスる可能性が高いので、
DBAがメンテナンスしているスキーマ（PJ_TEST00 など）を使うのが良い。

注2：
通常は、直近でテーブル定義変更のあったテーブルやカラムに関係する箇所だけが差異として現れるはず。
それ以外の箇所が変わっていた場合は、何かしらミスしている恐れがあるので
状況を確認しないままコミットしてはならない。

注3：
CHAR⇔VARCHAR2 の型変更は、桁数が同じであっても共通DAOの生成結果に影響する。

注4：
NUMBER型でかつ精度が0（整数）のカラムについては、桁数によって対応する Java の型が異なるため、再生成が必要になる場合がある。
